---
/**
 * Component Library Test Page
 *
 * Comprehensive demonstration of all components with variants, states, and responsive design.
 */

import BaseLayout from '@layouts/BaseLayout.astro';
import Header from '@components/layout/Header.astro';
import Footer from '@components/layout/Footer.astro';
import Container from '@components/ui/Container.astro';
import Button from '@components/ui/Button.astro';
import Card from '@components/ui/Card.astro';
import Badge from '@components/ui/Badge.astro';
import Link from '@components/ui/Link.astro';
import PostCard from '@components/blog/PostCard.astro';
import PostList from '@components/blog/PostList.astro';
import PostMeta from '@components/blog/PostMeta.astro';
import PostHeader from '@components/blog/PostHeader.astro';
import TableOfContents from '@components/blog/TableOfContents.astro';
import CodeBlock from '@components/mdx/CodeBlock.astro';
import Callout from '@components/mdx/Callout.astro';
import Image from '@components/mdx/Image.astro';
import Hero from '@components/sections/Hero.astro';
import ProjectShowcase from '@components/sections/ProjectShowcase.astro';
import Timeline from '@components/sections/Timeline.astro';
import SkillsMatrix from '@components/sections/SkillsMatrix.astro';
import ContactForm from '@components/sections/ContactForm.astro';

// Sample data for testing
const samplePosts = [
  {
    title: 'Getting Started with Rust for Data Science',
    slug: 'rust-for-data-science',
    description: 'Learn how to leverage Rust\'s performance and safety for data science workflows.',
    pubDate: new Date('2024-01-15'),
    readingTime: 8,
    tags: ['Rust', 'Data Science', 'Performance'],
    featured: true,
  },
  {
    title: 'Building High-Performance ML Pipelines',
    slug: 'ml-pipelines',
    description: 'A comprehensive guide to designing scalable machine learning pipelines.',
    pubDate: new Date('2024-01-10'),
    readingTime: 12,
    tags: ['ML', 'Python', 'Architecture'],
  },
  {
    title: 'Julia for Scientific Computing',
    slug: 'julia-scientific-computing',
    description: 'Exploring Julia\'s capabilities for numerical and scientific computing.',
    pubDate: new Date('2024-01-05'),
    readingTime: 10,
    tags: ['Julia', 'HPC', 'Optimization'],
  },
];

const sampleHeadings = [
  { depth: 2, slug: 'introduction', text: 'Introduction' },
  { depth: 2, slug: 'layout-components', text: 'Layout Components' },
  { depth: 3, slug: 'header', text: 'Header' },
  { depth: 3, slug: 'footer', text: 'Footer' },
  { depth: 2, slug: 'ui-components', text: 'UI Components' },
  { depth: 3, slug: 'buttons', text: 'Buttons' },
  { depth: 3, slug: 'cards', text: 'Cards' },
];
---

<BaseLayout
  title="Component Library Test"
  description="Testing all components in the portfolio"
>
  <Header currentPath="/test/components" />

  <main>
    <!-- Page Title -->
    <section class="py-12 bg-light-surface dark:bg-dark-surface">
      <Container maxWidth="xl">
        <h1 class="text-4xl md:text-5xl font-bold text-center mb-4">
          Component Library Test
        </h1>
        <p class="text-xl text-center text-text-secondary-light dark:text-text-secondary-dark">
          Comprehensive demonstration of all 21 components
        </p>
      </Container>
    </section>

    <!-- Table of Contents -->
    <section class="py-8">
      <Container maxWidth="md">
        <TableOfContents headings={sampleHeadings} />
      </Container>
    </section>

    <!-- 1. HERO SECTION -->
    <Hero />

    <!-- 2. UI COMPONENTS -->
    <section id="ui-components" class="section bg-light-surface dark:bg-dark-surface">
      <Container maxWidth="xl" paddingY="lg">
        <h2 class="text-3xl font-bold mb-8">UI Components</h2>

        <!-- Buttons -->
        <div class="mb-12">
          <h3 id="buttons" class="text-2xl font-semibold mb-4">Buttons</h3>
          <div class="flex flex-wrap gap-4 mb-6">
            <Button variant="primary" size="sm">Small Primary</Button>
            <Button variant="primary" size="md">Medium Primary</Button>
            <Button variant="primary" size="lg">Large Primary</Button>
          </div>
          <div class="flex flex-wrap gap-4 mb-6">
            <Button variant="secondary">Secondary</Button>
            <Button variant="ghost">Ghost</Button>
            <Button variant="link">Link Button</Button>
          </div>
          <div class="flex flex-wrap gap-4 mb-6">
            <Button variant="primary" disabled>Disabled</Button>
            <Button variant="primary" loading>Loading</Button>
            <Button variant="primary" href="https://github.com" target="_blank">External Link</Button>
          </div>
        </div>

        <!-- Badges -->
        <div class="mb-12">
          <h3 class="text-2xl font-semibold mb-4">Badges</h3>
          <div class="flex flex-wrap gap-3 mb-6">
            <Badge variant="default" size="sm">Default Small</Badge>
            <Badge variant="default" size="md">Default Medium</Badge>
            <Badge variant="default" size="lg">Default Large</Badge>
          </div>
          <div class="flex flex-wrap gap-3 mb-6">
            <Badge variant="success">Success</Badge>
            <Badge variant="warning">Warning</Badge>
            <Badge variant="error">Error</Badge>
            <Badge variant="info">Info</Badge>
          </div>
          <div class="flex flex-wrap gap-3">
            <Badge shape="pill">Pill Shape</Badge>
            <Badge shape="square">Square Shape</Badge>
          </div>
        </div>

        <!-- Cards -->
        <div class="mb-12">
          <h3 id="cards" class="text-2xl font-semibold mb-4">Cards</h3>
          <div class="grid md:grid-cols-3 gap-6">
            <Card variant="default" hover={true}>
              <h4 class="text-xl font-semibold mb-2">Default Card</h4>
              <p class="text-text-secondary-light dark:text-text-secondary-dark">
                This is a default card with hover effect.
              </p>
            </Card>

            <Card variant="accented" hover={true}>
              <h4 class="text-xl font-semibold mb-2">Accented Card</h4>
              <p class="text-text-secondary-light dark:text-text-secondary-dark">
                This card has an accented left border.
              </p>
            </Card>

            <Card variant="colored" hover={true}>
              <h4 class="text-xl font-semibold mb-2">Colored Card</h4>
              <p class="text-text-secondary-light dark:text-text-secondary-dark">
                This card has a gradient background.
              </p>
            </Card>
          </div>
        </div>

        <!-- Links -->
        <div class="mb-12">
          <h3 class="text-2xl font-semibold mb-4">Links</h3>
          <div class="space-y-2">
            <div>
              <Link href="/about">Internal Link</Link>
            </div>
            <div>
              <Link href="https://github.com">External Link (with icon)</Link>
            </div>
            <div>
              <Link href="https://example.com" showExternalIcon={false}>External Link (no icon)</Link>
            </div>
          </div>
        </div>
      </Container>
    </section>

    <!-- 3. BLOG COMPONENTS -->
    <section id="blog-components" class="section">
      <Container maxWidth="xl" paddingY="lg">
        <h2 class="text-3xl font-bold mb-8">Blog Components</h2>

        <!-- Post Header -->
        <div class="mb-12">
          <h3 class="text-2xl font-semibold mb-4">Post Header</h3>
          <PostHeader
            title="Sample Blog Post Title"
            description="This is a sample description for testing the post header component."
            pubDate={new Date('2024-01-15')}
            readingTime={8}
            tags={['Rust', 'Data Science', 'Tutorial']}
          />
        </div>

        <!-- Post Meta -->
        <div class="mb-12">
          <h3 class="text-2xl font-semibold mb-4">Post Meta</h3>
          <PostMeta
            pubDate={new Date('2024-01-15')}
            updatedDate={new Date('2024-01-20')}
            readingTime={8}
            tags={['Rust', 'ML', 'Performance']}
            showShare={true}
          />
        </div>

        <!-- Post List -->
        <div class="mb-12">
          <h3 class="text-2xl font-semibold mb-4">Post List (Grid)</h3>
          <PostList posts={samplePosts} columns="3" />
        </div>

        <!-- Empty Post List -->
        <div class="mb-12">
          <h3 class="text-2xl font-semibold mb-4">Post List (Empty State)</h3>
          <PostList posts={[]} showEmptyState={true} />
        </div>
      </Container>
    </section>

    <!-- 4. MDX COMPONENTS -->
    <section id="mdx-components" class="section bg-light-surface dark:bg-dark-surface">
      <Container maxWidth="xl" paddingY="lg">
        <h2 class="text-3xl font-bold mb-8">MDX Components</h2>

        <!-- Code Blocks -->
        <div class="mb-12">
          <h3 class="text-2xl font-semibold mb-4">Code Blocks</h3>
          <CodeBlock lang="rust" title="main.rs">
{`fn main() {
    println!("Hello, Rust!");

    let numbers = vec![1, 2, 3, 4, 5];
    let sum: i32 = numbers.iter().sum();

    println!("Sum: {}", sum);
}`}
          </CodeBlock>

          <CodeBlock lang="python" title="example.py">
{`def fibonacci(n):
    """Calculate the nth Fibonacci number."""
    if n <= 1:
        return n
    return fibonacci(n - 1) + fibonacci(n - 2)

print(fibonacci(10))`}
          </CodeBlock>
        </div>

        <!-- Callouts -->
        <div class="mb-12">
          <h3 class="text-2xl font-semibold mb-4">Callouts</h3>

          <Callout variant="info" title="Information">
            This is an informational callout. Use it to highlight important details.
          </Callout>

          <Callout variant="success" title="Success">
            This indicates a successful operation or positive outcome.
          </Callout>

          <Callout variant="warning" title="Warning">
            Be careful! This is a warning about potential issues.
          </Callout>

          <Callout variant="error" title="Error">
            Something went wrong. This is an error message.
          </Callout>

          <Callout variant="note">
            This is a simple note without a custom title.
          </Callout>

          <Callout variant="info" title="Collapsible Callout" collapsible={true}>
            This callout can be collapsed and expanded by clicking the header.
          </Callout>
        </div>

        <!-- Images -->
        <div class="mb-12">
          <h3 class="text-2xl font-semibold mb-4">Images</h3>
          <Image
            src="https://via.placeholder.com/800x600/6B8E6F/FFFFFF?text=Sample+Image"
            alt="Sample placeholder image"
            caption="This is a sample image with caption"
          />
        </div>
      </Container>
    </section>

    <!-- 5. SECTION COMPONENTS -->
    <section id="section-components" class="section">
      <Container maxWidth="xl" paddingY="lg">
        <h2 class="text-3xl font-bold mb-12 text-center">Section Components</h2>

        <!-- Project Showcase -->
        <div class="mb-16">
          <ProjectShowcase />
        </div>

        <!-- Timeline -->
        <div class="mb-16">
          <Timeline />
        </div>

        <!-- Skills Matrix -->
        <div class="mb-16">
          <SkillsMatrix />
        </div>

        <!-- Contact Form -->
        <div class="mb-16">
          <ContactForm />
        </div>
      </Container>
    </section>

    <!-- Accessibility Test Section -->
    <section id="accessibility" class="section bg-light-surface dark:bg-dark-surface">
      <Container maxWidth="xl" paddingY="lg">
        <h2 class="text-3xl font-bold mb-8">Accessibility Features</h2>

        <div class="grid md:grid-cols-2 gap-6">
          <Card>
            <h3 class="text-xl font-semibold mb-3">Keyboard Navigation</h3>
            <p class="text-text-secondary-light dark:text-text-secondary-dark mb-4">
              All interactive components are keyboard accessible:
            </p>
            <ul class="list-disc list-inside space-y-2 text-text-secondary-light dark:text-text-secondary-dark">
              <li>Tab through interactive elements</li>
              <li>Enter/Space to activate buttons</li>
              <li>Escape to close modals/menus</li>
              <li>Arrow keys for navigation</li>
            </ul>
          </Card>

          <Card>
            <h3 class="text-xl font-semibold mb-3">WCAG 2.2 AAA</h3>
            <p class="text-text-secondary-light dark:text-text-secondary-dark mb-4">
              All components meet AAA standards:
            </p>
            <ul class="list-disc list-inside space-y-2 text-text-secondary-light dark:text-text-secondary-dark">
              <li>7:1 contrast ratio minimum</li>
              <li>Semantic HTML elements</li>
              <li>ARIA labels and roles</li>
              <li>Screen reader friendly</li>
            </ul>
          </Card>

          <Card>
            <h3 class="text-xl font-semibold mb-3">Focus Indicators</h3>
            <p class="text-text-secondary-light dark:text-text-secondary-dark mb-4">
              Visible focus states on all interactive elements:
            </p>
            <div class="flex flex-wrap gap-3 mt-4">
              <Button variant="primary">Focus Me</Button>
              <Button variant="secondary">And Me</Button>
              <Link href="#">Tab Here</Link>
            </div>
          </Card>

          <Card>
            <h3 class="text-xl font-semibold mb-3">Responsive Design</h3>
            <p class="text-text-secondary-light dark:text-text-secondary-dark mb-4">
              Mobile-first approach tested at:
            </p>
            <ul class="list-disc list-inside space-y-2 text-text-secondary-light dark:text-text-secondary-dark">
              <li>320px (Mobile S)</li>
              <li>768px (Tablet)</li>
              <li>1024px (Laptop)</li>
              <li>1920px (Desktop)</li>
            </ul>
          </Card>
        </div>
      </Container>
    </section>

    <!-- Component Summary -->
    <section class="section">
      <Container maxWidth="lg" paddingY="lg">
        <Card variant="colored" padding="lg">
          <h2 class="text-3xl font-bold mb-6 text-center">Component Library Summary</h2>

          <div class="grid md:grid-cols-4 gap-6 text-center">
            <div>
              <div class="text-4xl font-bold text-eucalyptus-700 dark:text-eucalyptus-300 mb-2">21</div>
              <div class="text-sm text-text-secondary-light dark:text-text-secondary-dark">Total Components</div>
            </div>
            <div>
              <div class="text-4xl font-bold text-eucalyptus-700 dark:text-eucalyptus-300 mb-2">5</div>
              <div class="text-sm text-text-secondary-light dark:text-text-secondary-dark">Component Categories</div>
            </div>
            <div>
              <div class="text-4xl font-bold text-eucalyptus-700 dark:text-eucalyptus-300 mb-2">AAA</div>
              <div class="text-sm text-text-secondary-light dark:text-text-secondary-dark">WCAG Compliance</div>
            </div>
            <div>
              <div class="text-4xl font-bold text-eucalyptus-700 dark:text-eucalyptus-300 mb-2">100%</div>
              <div class="text-sm text-text-secondary-light dark:text-text-secondary-dark">TypeScript Coverage</div>
            </div>
          </div>

          <div class="mt-8 text-center">
            <Button variant="primary" size="lg" href="/">
              Back to Home
            </Button>
          </div>
        </Card>
      </Container>
    </section>
  </main>

  <Footer />
</BaseLayout>
